{% extends "base.html" %}

{% load static %}

{% block content %}

  <!-- Smart and beautiful -->
  <div id="heroCarousel" class="carousel slide hero-section" data-bs-ride="carousel">
    <ol class="carousel-indicators">
        <li data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></li>
        <li data-bs-target="#heroCarousel" data-bs-slide-to="1"></li>
        <li data-bs-target="#heroCarousel" data-bs-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="container">
                <div class="content">
                    <h1 class="animate__animated animate__fadeInDown">ICT skills at their best</h1>
                    <p class="animate__animated animate__fadeInUp">At Jetbrains Institute of Information Technology, we offer computer & related short courses that equip students with digital and practical skills.</p>
                    <a class="btn btn-primary btn-lg animate__animated animate__bounceIn" href="{% url 'enroll' %}" role="button">Join Us Today</a>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="container">
                <div class="content">
                    <h1 class="animate__animated animate__fadeInDown">Advanced Programming</h1>
                    <p class="animate__animated animate__fadeInUp">Learn the latest in programming languages and frameworks from industry experts.</p>
                    <a class="btn btn-primary btn-lg animate__animated animate__bounceIn" href="{% url 'courses' %}" role="button">Explore Courses</a>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="container">
                <div class="content">
                    <h1 class="animate__animated animate__fadeInDown">Tech Innovations</h1>
                    <p class="animate__animated animate__fadeInUp">Stay ahead with our courses on the latest technological innovations and trends.</p>
                    <a class="btn btn-primary btn-lg animate__animated animate__bounceIn" href="{% url 'enroll' %}" role="button">Learn More</a>
                </div>
            </div>
        </div>
    </div>
    <a class="carousel-control-prev" href="#heroCarousel" role="button" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </a>
    <a class="carousel-control-next" href="#heroCarousel" role="button" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </a>
  </div>

  <!-- Course Cards -->
  <div class="container my-5">
    <h2 class="text-center mb-4">Our Courses</h2>
    <div class="row mb-4">
      <div class="col-md-6 offset-md-3">
        <input class="form-control" id="searchInput" type="text" placeholder="Search for courses...">
      </div>
    </div>
    <div class="row" id="courseList">
      <div class="col-md-4 mb-4 course-card">
        <div class="card">
          <img src={% static "assets/images/courses/ms.jpg" %} class="card-img-top" alt="Web Development">
          <div class="card-body">
            <h5 class="card-title">Computer packages</h5>
            <p class="card-text">We covers fundamental skills such as word processing (e.g., Microsoft Word), spreadsheets (e.g., Microsoft Excel), and internet usage.</p>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#courseModal"  data-course-title="Computer packages" data-course-description="We covers fundamental skills such as word processing (e.g., Microsoft Word), spreadsheets (e.g., Microsoft Excel), and internet usage.">Know more</button>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-4 course-card">
        <div class="card">
          <img src={% static "assets/images/courses/py.jpg" %} class="card-img-top" alt="Python Programming">
          <div class="card-body">
            <h5 class="card-title">Programming / Coding</h5>
            <p class="card-text">We offer introductory and advanced courses in programming languages such as Python, Java, C++, and PHP.</p>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#courseModal"  data-course-title="Computer packages" data-course-description="We covers fundamental skills such as word processing (e.g., Microsoft Word), spreadsheets (e.g., Microsoft Excel), and internet usage.">Know more</button>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-4 course-card">
        <div class="card">
          <img src={% static "assets/images/courses/graphics.jpg" %} class="card-img-top" alt="Computer Packages">
          <div class="card-body">
            <h5 class="card-title">Graphics and Design</h5>
            <p class="card-text">We teach graphic design principles and practical skills using tools like Adobe Photoshop, Illustrator, and CorelDRAW.</p>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#courseModal"  data-course-title="Computer packages" data-course-description="We covers fundamental skills such as word processing (e.g., Microsoft Word), spreadsheets (e.g., Microsoft Excel), and internet usage.">Know more</button>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-4 course-card">
        <div class="card">
          <img src={% static "assets/images/courses/cad.jpg" %} class="card-img-top" alt="Computer Packages">
          <div class="card-body">
            <h5 class="card-title">Computer Aided Design</h5>
            <p class="card-text">We teach the use of computer softwares that assist in the creation, modification, analysis, or optimization of a design.</p>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#courseModal"  data-course-title="Computer packages" data-course-description="We covers fundamental skills such as word processing (e.g., Microsoft Word), spreadsheets (e.g., Microsoft Excel), and internet usage.">Know more</button>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-4 course-card">
        <div class="card">
          <img src={% static "assets/images/courses/accounting.jpg" %} class="card-img-top" alt="Computer Packages">
          <div class="card-body">
            <h5 class="card-title">Accounting &amp; Statistical packages</h5>
            <p class="card-text">We provide training on using accounting software such as QuickBooks, Sage, and Tally for financial management and bookkeeping.</p>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#courseModal"  data-course-title="Computer packages" data-course-description="We covers fundamental skills such as word processing (e.g., Microsoft Word), spreadsheets (e.g., Microsoft Excel), and internet usage.">Know more</button>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-4 course-card">
        <div class="card">
          <img src={% static "assets/images/courses/DG.jpg" %} class="card-img-top" alt="Computer Packages">
          <div class="card-body">
            <h5 class="card-title">Digital Skills</h5>
            <p class="card-text">We teach broad range of abilities needed to effectively use digital devices, communication applications, and networks to access and manage information.</p>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#courseModal"  data-course-title="Computer packages" data-course-description="We covers fundamental skills such as word processing (e.g., Microsoft Word), spreadsheets (e.g., Microsoft Excel), and internet usage.">Know more</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="courseModal" tabindex="-1" aria-labelledby="courseModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="courseModalLabel">Course Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h4 id="modalCourseTitle"></h4>
                <p id="modalCourseDescription"></p>
            </div>
            <div class="modal-footer">
                <a href="{% url 'course-list' %}" class="btn btn-primary">View All Courses</a>
            </div>
        </div>
    </div>
  </div>

  <!-- Student Testimonials -->
  <div class="container testimonials-container">
    <h2 class="text-center mb-4">What Our Students Say</h2>
    <div class="testimonials-grid" id="testimonialsGrid">
        <!-- Testimonials will be dynamically inserted here -->
    </div>
    <div class="testimonial-nav">
        <button id="prevTestimonial" aria-label="Previous testimonial">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button id="nextTestimonial" aria-label="Next testimonial">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
  </div>

  <!-- Contact Section -->
  <section class="contact-section">
    <div class="container">
        <h2 class="text-center mb-5 animate__animated animate__fadeInDown">Get in Touch</h2>
        {% include "_messages.html" %}
        <div class="row g-4">
            <div class="col-lg-6 animate__animated animate__fadeInLeft">
                <div class="contact-form">
                    <form action="{% url 'main' %}" method="post">
                        {% csrf_token %}
                        <div class="mb-3">
                            <input type="text" class="form-control" id="name" name="name" placeholder="Your Name" required>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" id="email" name="email" placeholder="Your Email" required>
                        </div>
                        <div class="mb-3">
                            <input type="tel" class="form-control" id="number" name="number" placeholder="Your Phone Number" required>
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control" id="message" name="message" rows="5" placeholder="Your Message" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 animate__animated animate__bounceIn">Send Message</button>
                    </form>
                </div>
            </div>
            <div class="col-lg-6 animate__animated animate__fadeInRight">
                <div class="contact-info">
                    <h5>Contact Information</h5>
                    <p><i class="fas fa-map-marker-alt"></i> Limuru, Kiambu County</p>
                    <p><i class="fas fa-building"></i> Jaskat House, Co-op Building Rm. 406 4<sup>th</sup> floor</p>
                    <p><i class="fas fa-phone"></i> (123) 456-7890</p>
                    <p><i class="fas fa-envelope"></i> <a href="mailto:info@jetbrainscollege.edu">info@jetbrainscollege.edu</a></p>
                    <div class="social-icons">
                        <h5>Follow Us</h5>
                        <a href="#" target="_blank"><i class="fab fa-facebook"></i></a>
                        <a href="#" target="_blank"><i class="fab fa-twitter"></i></a>
                        <a href="#" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="#" target="_blank"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </section>

  <script>
    const testimonials = [
        {% for testimonial in testimonies %}
        {% if testimonial.approved %}
        {
            message: "{{ testimonial.message|escapejs }}",
            name: "{{ testimonial.name|escapejs }}",
            course: "{{ testimonial.course|escapejs }}"
        },
        {% endif %}
        {% empty %}
        {
            message: "Wanna share your experience today?",
            name: "Jetbrains Institute",
            course: "Developer"
        },
        {% endfor %}
    ];

    const testimonialsGrid = document.getElementById('testimonialsGrid');
    const prevButton = document.getElementById('prevTestimonial');
    const nextButton = document.getElementById('nextTestimonial');
    let currentIndex = 0;

    function createTestimonialCard(testimonial) {
        return `
            <div class="testimonial-item">
                <i class="fas fa-quote-left testimonial-quote"></i>
                <div class="testimonial-content">
                    <p>"${testimonial.message}"</p>
                </div>
                <div class="testimonial-author">
                    <h5>${testimonial.name}</h5>
                    <p>${testimonial.course}</p>
                </div>
            </div>
        `;
    }

    function updateTestimonials() {
        testimonialsGrid.innerHTML = '';
        const itemsToShow = window.innerWidth >= 768 ? 3 : 1;
        for (let i = 0; i < itemsToShow; i++) {
            const index = (currentIndex + i) % testimonials.length;
            testimonialsGrid.innerHTML += createTestimonialCard(testimonials[index]);
        }
    }

    prevButton.addEventListener('click', () => {
        currentIndex = (currentIndex - 1 + testimonials.length) % testimonials.length;
        updateTestimonials();
    });

    nextButton.addEventListener('click', () => {
        currentIndex = (currentIndex + 1) % testimonials.length;
        updateTestimonials();
    });

    window.addEventListener('resize', updateTestimonials);
    updateTestimonials();
  </script>

{% endblock content %}